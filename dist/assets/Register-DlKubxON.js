import{r as a,c as n,a as e,w as d,v as p,b as f,d as b,e as k,f as x,g as S,o as i,h as V}from"./index-C3hUR6oy.js";import{C,u as T}from"./UserNameStore-_yaaHiFe.js";import{i as _}from"./index-Dz2eRhrO.js";const L={class:"register"},N=e("h1",null,"Register",-1),P=e("label",{for:"user"},"user name",-1),U=e("label",{for:"email"},"email",-1),H=e("label",{for:"password"},"Password",-1),M=["disabled"],R={key:0},B={key:1},O={key:0,class:"prompt"},D={__name:"Register",setup(j){const l=a(""),c=a(""),m=a(""),u=a(!1),g=a(!1),v=async function(){u.value=!0;const h="/api/v1/auth/register",s={name:this.user,email:this.email,password:this.password},r=new Headers;r.append("Content-Type","application/json");const t={method:"POST",headers:r,body:JSON.stringify(s),redirect:"follow"};try{const o=await fetch(h,t),y=await o.json();if(o.ok){T().setUser(l),_("Successfully Registered in",{theme:"auto",type:"success",position:"top-center",dangerouslyHTMLString:!0});const w=this.$route.query.redirect||"/protected";this.$router.push(w)}else if(o.status===400)_(y.msg,{theme:"dark",type:"error",dangerouslyHTMLString:!0}),this.showPrompt=!0;else if(o.status===400){//! important
}else o.status}catch(o){console.error(o)}};return(h,s)=>{const r=S("AppLink");return i(),n("div",L,[e("form",{class:"form",onSubmit:b(v,["prevent"])},[N,P,d(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),name:"user",type:"text",class:"input"},null,512),[[p,l.value]]),U,d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),name:"email",type:"email",class:"input"},null,512),[[p,c.value]]),H,d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>m.value=t),name:"password",type:"text",class:"input"},null,512),[[p,m.value]]),e("button",{class:"btn",disabled:u.value},[u.value?(i(),n("span",R,[f(C)])):(i(),n("span",B," Register "))],8,M)],32),g.value?(i(),n("div",O,[f(r,{to:"/login",class:"internal-link"},{default:k(()=>[V("login page")]),_:1})])):x("",!0)])}}};export{D as default};
