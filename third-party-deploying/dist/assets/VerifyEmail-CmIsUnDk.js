import{i as a}from"./index-Dz2eRhrO.js";import{_ as l,E as d,c as n,a as i,t as f,h as m,o as c}from"./index-C3hUR6oy.js";const u={setup(){const s=d(),t=s.query.email,r=s.query.token;if(!t||!r){console.error("Email or token query parameters are missing");return}return{email:t,token:r,seconds:10,verified:!1}},mounted(){this.remaining(),this.verifyEmail()},methods:{remaining(){const s=setInterval(()=>{this.seconds--,this.seconds===0&&clearInterval(s)},1e3)},async verifyEmail(){const s=new Headers;s.append("Content-Type","application/json");const t=JSON.stringify({email:this.email,verificationToken:this.token}),r={method:"POST",headers:s,body:t,redirect:"follow"};try{const e=await fetch("/api/v1/auth/verify-email",r);if(e.status===200){const o=await e.json();this.verified=!0,console.log(o),a("Email verified successfully",{theme:"dark",type:"success",dangerouslyHTMLString:!0})}else if(e.status===401){const o=await e.json();a(o.msg,{theme:"dark",type:"error",dangerouslyHTMLString:!0}),this.verified=!1}}catch(e){console.error(e),this.verified=!1}}}},h={key:0,class:"verify"},y=i("p",null,"your email's been verified",-1),p={key:1,class:"warn"};function v(s,t,r,e,o,_){return e.verified?(c(),n("div",h,[y,i("p",null,[i("span",null,f(e.seconds<10?"0"+e.seconds:e.seconds),1),m(" seconds to go to the main page ")])])):(c(),n("div",p,"please check your email again"))}const w=l(u,[["render",v]]);export{w as default};
